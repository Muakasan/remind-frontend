<!DOCTYPE HTML>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Create Module</title>
        <link rel="stylesheet" href="../css/foundation.css"/>
        <link rel="stylesheet" href="../css/remind-style.css">
        <link rel="stylesheet" href="../css/remind-style.css" />
        <script src="../js/vendor/modernizr.js"></script>
        <script src="../js/vendor/jquery.js"></script>
        <script src="../js/foundation.min.js"></script>
        <script src="../jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>
        <script src="../tag-it-master/js/tag-it.js"></script>
        <link rel="stylesheet" href="../jquery-ui-1.11.4.custom/jquery-ui.css" />
        <link rel="stylesheet" href="../tag-it-master/css/jquery.tagit.css"/>
    </head>
    <body>
        <nav class="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <h1><a href="#">Remind</a></h1>
                </li>
            </ul>
            <section class="top-bar-section">
                <ul class="right">
                    <li><a href="#">Manage Courses</a></li>
                    <li><a href="#">My Courses</a></li>
                    <li><a href="#">Manage Instructors</a></li>
                    <li><a href="#">Manage Students</a></li>
                    <li><a href="#">Me</a></li>
                </ul>
            </section>
        </nav>
        <div class="row">
            <div class="large-12 medium-12 small-12">
                <h1>Create Mathematics 101</h1>
            </div>
        </div>
        <div class="row">
            <a id="add_question_btn" class="button semiround" href="#">Add a Question</a>
        </div>
        <div class="row">
            <ul id="accordion" class="accordion" data-accordion>
                <li class="accordion-navigation">
                    <a href="#panel">Which Class has the Highest Wavelength?<label>Multiple Choice</label></a>        
                    <div id="panel" class="content">
                        <button href="#" data-dropdown="question_type_drop" class="button dropdown semiround">Question Type</button>
                        <ul id="question_type_drop" data-dropdown-content class="f-dropdown semiround" aria-hidden="true">
                            <li><a href="#">Multiple Choice</a></li>
                            <li><a href="#">Free Response</a></li>
                            <li><a href="#">Fill in The Blank</a></li>
                            <li><a href="#">Matching</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        <script>
            $(document).foundation();
            /*
            function getQuestionNumber(my_id){
                return my_id.substring(0, my_id.indexOf('_'));
            }
            $('#add_question_btn').click(function(){

            });
            */
            var count = 0; //count which is used to mark question number

            // code to create a new question by adding to the accordion
            $("#add_question_btn").click(function(){ 
                count++;

                //add id to prompt textarea?
                $("#accordion").append("<li class='accordion-navigation'> \
                    <a href='#panel-" + count + "'>New Question</a> \
                    <div id='panel-" + count + "' class='content'> \
                        <h4>Prompt:</h4> \
                        <textarea></textarea> \
                        <button data-dropdown='question_type_drop_"+ count+"' class='button dropdown semiround'>Question Type</button> \
                        <ul id='question_type_drop_" + count + "' data-dropdown-content class='f-dropdown semiround' aria-hidden='true'> \
                                <li><a href='#'>Multiple Choice</a></li> \
                                <li><a href='#'>Free Response</a></li> \
                                <li><a href='#'>Fill in The Blank</a></li> \
                                <li><a href='#'>Matching</a></li> \
                        </ul> \
                        <ul id='myTags-" + count + "'></ul> \
                    </div> \
                </li>");

                //tags are created by putting a ul in the html code with an id and then calling the following tagit code with a corresponding id 
                $("#myTags-" + count).tagit({
                    placeholderText: "Search...",
                    caseSensitive: false
                });
            });

            //checks when the dropdown is clicked by looking for li elements which are descendents of the content class
            $("#accordion").on("click", ".content li", function(){
                var questionType = $(this).children().text(); //gets the text from the li that was clicked
                $(this).parent().prev().text(questionType); //changes the dropdown buttons text to the li's text
                
                //This switch determines the question type based on the dropdown that was clicked
                switch(questionType){ 
                    case "Multiple Choice":
                        alert('hey im a MC question');
                        break;

                    case "Free Response":
                        alert('hey im a FR question');
                        break;

                    case "Fill in The Blank":
                        alert('hey im a FTB question');
                        break;

                    case "Matching":
                        alert('hey im a match question');
                        break;
                }
            });


           // $([data-question-number])
        </script>
    </body>
</html>