<!DOCTYPE HTML>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Remind | Student Question</title>
        <link rel="stylesheet" href="../css/foundation.css"/>
        <link rel="stylesheet" href="../css/remind-style.css">
        <script src="../js/vendor/modernizr.js"></script>
        <script src="../js/vendor/jquery.js"></script>
        <script src="../js/foundation.min.js"></script>
        <script src="../jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>
        <script src="../tag-it-master/js/tag-it.js"></script>
        <link rel="stylesheet" href="../jquery-ui-1.11.4.custom/jquery-ui.css" />
        <link rel="stylesheet" href="../tag-it-master/css/jquery.tagit.css"/>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#myTags,#myTags2,#myTags3,#myTags4").tagit({
                    placeholderText: "Search...",
                    caseSensitive: false
                });

            });
        </script>
    </head>
    <body>
         <nav class="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <h1><a href="#">Remind</a></h1>
                </li>
            </ul>
            <section class="top-bar-section">
                <ul class="right">
                    <li><a href="student_courses.html">My Courses</a></li>
                    <li><a href="#">Me</a></li>
                </ul>
            </section>
        </nav>
        <div class="row">
            <div class="large-12 medium-12 small-12 columns">
                <h1 class="text-center">New Question</h1>
            </div>
        </div>
        <div class="row">
                <div class="text-center">
                    <button id="drop_btn" href="#" data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="button dropdown small semiround">{Type}</button>
                </div>
                <!--anchor tags are used simply for styling-->
                <ul id="drop1" data-dropdown-content class="f-dropdown semiround info" aria-hidden="true">
                    <li id="opt1"><a>Multiple Choice</a></li>
                    <li id="opt2"><a>Free Response</a></li>
                    <li id="opt3"><a>Fill The Blank</a></li>
                    <li id="opt4"><a>Matching</a></li>
                </ul>
        </div>
        <div class="row">
            <h4>Prompt:</h4>
            <textarea></textarea>
        </div>
        <div class="row text-center">
            <h4>Content: </h4>
            <a class="button semiround">Add Content</a>
        </div>
        <div class="row">
            <div id="grp1" class="group">
                <div> 
                    Choices<br>
                    <input id="mc_input" type="text" placeholder="New Choice">
                    <div class="text-center">
                        <a id="mc_add_choice_btn" class="button success semiround small">Add Choice</a>
                    </div>
                    <strong>Tags:</strong>    
                    <ul id="myTags">
                    </ul>
                </div>
            </div>
            <div id="grp2" class="group">
                <div> 
                <strong>Answer:</strong><br>
                    <textarea placeholder="Answer"></textarea>
                </div>
                <br>
                <strong>Tags:</strong>    
                <ul id="myTags2"></ul>
            </div>
            <div id="grp3" class="group">
                
                <strong>Content:</strong>
                <div id="ftb_div_1">
                <textarea id='ftb_textarea'></textarea>
                    <div class="text-center">
                        <a id="ftb_text_btn" class="button semiround">Submit Text Content</a>
                    </div>
                </div>
                <div id="ftb_div_2">
                    <div class="row">
                        <div class="small-8 medium-8 large-8 columns">
                            <div class="panel callout semiround" id="ftb_text">
                            </div>
                        </div>
                        <a id="ftb_clear" class="button semiround alert small">Clear</a>
                    </div>
                    <div id="ftb_div_content">
                    </div>
                </div>
                <strong>Tags:</strong>    
                <ul id="myTags3"></ul>
            </div>
            <div id="grp4" class="group">
                <div class="row">
                    <div class="small-6 medium-6 large-6 columns">
                    <h4>Questions</h4>
                    </div>
                    <div class="small-6 medium-6 large-6 columns">
                    <h4>Options</h4>
                    </div>
                </div>
                <div class="row">
                    <div id="match_div_question">
                    </div>
                </div>
                <div class="row">
                    <div id="match_div_distract" class="small-6 medium-6 large-6 columns right">
                    <h6>Distractors</h6>
                    </div>
                </div>
                <div class="row">
                    <div id="match_question_button" class="small-8 medium-8 large-8 columns">
                        <a class="button semiround">Add a Question</a>
                    </div>
                    <div id="match_distract_button" class="small-4 medium-4 large-4 columns">
                        <a class="button semiround">Add a Distractor</a>
                    </div>
                </div>
                <strong>Tags:</strong>
                <ul id="myTags4"></ul>
            </div>
        </div>
        <div class="row text-center">
            <a class="button success semiround">Submit for Approval</a>
        </div>
    </body>
    <script>
        $(document).foundation();
        $('.group').hide();
        //Choose Question Type Dropdown
        $('#opt1').click(function () {
            $('#drop_btn').html('Multiple Choice');
            $('.group').hide();
            $('#grp1').show();
     });
        $('#opt2').click(function () {
            $('#drop_btn').html('Free Response');
            $('.group').hide();
            $('#grp2').show();
     });
        $('#opt3').click(function () {
            $('#drop_btn').html('Fill in the Blank');
            $('.group').hide();
            $('#grp3').show();
     });
        $('#opt4').click(function () {
            $('#drop_btn').html('Matching');
            $('.group').hide();
            $('#grp4').show();
     });
    //Fill in the Blank
    var wrapwords = function() {
    $('#ftb_text').each(function() {
        //$(this).html($(this).text().replace(/\b(\w+)\b/g, "<span>$1</span>"));
        $(this).html($(this).text().replace(/(\w+\'\w+|\w+â€™\w+|\w+)/g, "<span>$1</span>"));
    });
    var count = 1;
    $(document).on('click', '#ftb_text span', function(){
        if(!$(this).hasClass('info')){
            $(this).addClass('info label semiround');
            //$(this).text(count+'. '+$(this).text());
            var new_blank_row = "<div class='row'> \
                                    <h4>"+$(this).text()+"</h4> \
                                    <h6>Distractors</h6> \
                                    <div class='small-12 medium-12 large-12 columns'> \
                                        <a id=ftb_distractor_"+count+" class='button semiround'>Add a Distractor</a> \
                                    </div> \
                                </div>"
            $('#ftb_div_content').append(new_blank_row);
            $(document).on('click', '#ftb_distractor_'+count, function(){
            $(this).before('<input type="text"></input>');
            $(this).prev().addClass($(this).attr('id')+'_input');
            });
            count++;
        }
        });
    }

    $('#ftb_div_2').hide();
    $('#ftb_text_btn').click(function(){
        $('#ftb_div_1').hide();
        $('#ftb_text').text($('#ftb_textarea').val());
        $('#ftb_div_2').show();
        wrapwords();
    });

    $('#ftb_clear').click(function(){
        $('#ftb_div_content').html('');
        $('#ftb_div_2').hide();
        $('#ftb_div_1').show();
        count=1;
    });
    //Multiple Choice
    $('#mc_add_choice_btn').click(function(){
        var new_mc_option_rad = '<input type="radio" name="mc_opt" class="mc_option">';
        $('#mc_input').before(new_mc_option_rad);
        var mc_input_text = $('#mc_input').val();
        $('#mc_input').prev().val(mc_input_text);
        var new_mc_option_lab = '<label>'+ mc_input_text +'</label><br>';
        $('#mc_input').before(new_mc_option_lab);
        $('#mc_input').val('');        
        //$(this).prev().val($('#mc_input').text());
    });

    //Matching
    $('#match_question_button').click(function(){
        $('#match_div_question').append("<div class='row collapse'> \
                                            <div class='small-6 medium-6 large-6 columns'> \
                                                <input type='text'> \
                                            </div> \
                                            <div class='small-6 medium-6 large-6 columns'> \
                                                <input type='text' class='postfix'> \
                                            </div> \
                                        </div>")
    }); 
    $('#match_distract_button').click(function(){
        $('#match_div_distract').append("<input type='text'>");
    });

    </script>
</html>